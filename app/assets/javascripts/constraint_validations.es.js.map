{"version":3,"file":"constraint_validations.es.js","sources":["../../javascript/constraint_validations/util.js","../../javascript/constraint_validations/validators/checkbox_validator.js","../../javascript/constraint_validations/index.js"],"sourcesContent":["export function isFieldElement(element) {\n  return !element.disabled && \"validity\" in element && element.willValidate\n}\n\nexport function readValidationMessages(input) {\n  try {\n    return JSON.parse(input.getAttribute(\"data-validation-messages\")) || {}\n  } catch(_) {\n    return {}\n  }\n}\n","import { isFieldElement, readValidationMessages } from \"../util\"\n\nexport default class {\n  selector = \"input[type=checkbox]:required\"\n  ignoringMutations = false\n\n  constructor(constraintValidations, predicate) {\n    this.constraintValidations = constraintValidations\n    this.mutationObserver = new MutationObserver(this.handleMutation)\n    this.enabled = typeof predicate === \"function\" ?\n      predicate :\n      (group) => !!predicate\n  }\n\n  connect() {\n    this.mutationObserver.observe(this.element, {\n      attributeFilter: [\"required\"],\n      childList: true,\n      subtree: true\n    })\n    this.reportValidationMessages(this.element.querySelectorAll(this.selector))\n  }\n\n  disconnect() {\n    this.mutationObserver.disconnect()\n  }\n\n  willValidate(target) {\n    return this.willValidateGroup(checkboxGroup(target))\n  }\n\n  validate(target) {\n    const checkboxesInGroup = checkboxGroup(target).filter(isFieldElement)\n    const allRequired = checkboxesInGroup.every((checkbox) => checkbox.getAttribute(\"aria-required\") === \"true\")\n    const someChecked = checkboxesInGroup.some((checkbox) => checkbox.checked)\n\n    if (allRequired && someChecked) {\n      for (const checkbox of checkboxesInGroup) {\n        this.constraintValidations.clearValidity(checkbox)\n      }\n    } else if (allRequired) {\n      for (const checkbox of checkboxesInGroup) {\n        const validationMessages = readValidationMessages(checkbox)\n\n        checkbox.setCustomValidity(validationMessages.valueMissing)\n        this.constraintValidations.reportValidity(checkbox)\n      }\n    }\n  }\n\n  // Private\n\n  handleMutation = (mutationRecords) => {\n    if (this.ignoringMutations) return\n\n    for (const { addedNodes, target, type } of mutationRecords) {\n      if (type === \"attributes\") {\n        if (target.required) {\n          this.swapRequiredWithAriaRequired(target)\n        } else {\n          target.removeAttribute(\"aria-required\")\n        }\n      } else if (addedNodes.length) {\n        this.reportValidationMessages(addedNodes)\n      }\n    }\n  }\n\n  reportValidationMessages(nodes) {\n    const requiredCheckboxes = querySelectorAllNodes(this.selector, nodes)\n\n    for (const checkbox of requiredCheckboxes) {\n      if (checkbox.required) {\n        const group = checkboxGroup(checkbox)\n\n        if (this.willValidateGroup(group)) {\n          for (const checkboxInGroup of group) {\n            this.swapRequiredWithAriaRequired(checkboxInGroup)\n            if (checkboxInGroup.getAttribute(\"aria-invalid\") === \"true\") {\n              this.validate(checkboxInGroup)\n            }\n          }\n        }\n      }\n    }\n  }\n\n  swapRequiredWithAriaRequired(element) {\n    this.ignoringMutations = true\n    element.required = false\n    element.setAttribute(\"aria-required\", \"true\")\n    setTimeout(() => this.ignoringMutations = false, 0)\n  }\n\n  willValidateGroup(group) {\n    return group.length > 0 && this.enabled(group)\n  }\n\n  get element() {\n    return this.constraintValidations.element\n  }\n}\n\nfunction checkboxGroup(formControl) {\n  const results = new Set\n  const { name, form } = formControl\n\n  if (name && form instanceof HTMLFormElement) {\n    const group = form.elements.namedItem(name)\n    const elements = Symbol.iterator in group ?\n      group :\n      [group]\n\n    for (const element of elements) {\n      if (element.type === \"checkbox\") {\n        results.add(element)\n      }\n    }\n\n    if (results.size === 1 && results.has(formControl)) {\n      results.clear()\n    }\n  }\n\n  return Array.from(results)\n}\n\nfunction querySelectorAllNodes(selector, nodes, elements = new Set) {\n  for (const node of nodes) {\n    if (node instanceof Element) {\n      if (node.matches(selector)) {\n        elements.add(node)\n      }\n\n      elements.add(...querySelectorAllNodes(selector, node.children, elements))\n    }\n  }\n\n  return Array.from(elements)\n}\n","import { isFieldElement, readValidationMessages } from \"./util\"\nimport CheckboxValidator from \"./validators/checkbox_validator\"\n\nconst defaultOptions = {\n  disableSubmitWhenInvalid: false,\n  validateOn: [\"blur\", \"input\"],\n  validators: {\n    checkbox: false\n  }\n}\n\nexport default class ConstraintValidations {\n  static connect(element = document, options = {}) {\n    new this(element, options).connect()\n  }\n\n  constructor(element = document, options = {}) {\n    this.element = element\n    this.options = { ...defaultOptions, ...options }\n    this.validators = [\n      new CheckboxValidator(this, this.options.validators.checkbox)\n    ]\n  }\n\n  connect() {\n    this.validators.forEach(validator => validator.connect())\n    this.element.addEventListener(\"invalid\", this.reportFieldValidity, { capture: true, passive: false })\n\n    for (const eventName of this.options.validateOn) {\n      this.element.addEventListener(eventName, this.clearAndReportFieldValidity, { capture: true, passive: true })\n    }\n\n    this.element.addEventListener(\"input\", this.toggleSubmitsDisabled)\n\n    this.reportValidationMessages(\n      this.element instanceof HTMLFormElement ?\n        [this.element] :\n        this.element.querySelectorAll(\"form\")\n    )\n  }\n\n  disconnect() {\n    this.element.removeEventListener(\"invalid\", this.reportFieldValidity, { capture: true, passive: false })\n\n    for (const eventName of this.options.validateOn) {\n      this.element.removeEventListener(eventName, this.clearAndReportFieldValidity, { capture: true, passive: true })\n    }\n\n    this.element.removeEventListener(\"input\", this.toggleSubmitsDisabled)\n    this.validators.forEach(validator => validator.disconnect())\n  }\n\n  reportFieldValidity = (event) => {\n    if (isFieldElement(event.target) && this.reportValidity(event.target)) {\n      event.preventDefault()\n\n      focusFirstInvalidField(event.target.form || event.target)\n    }\n  }\n\n  clearAndReportFieldValidity = ({ target }) => {\n    if (isFieldElement(target)) {\n      this.clearValidity(target)\n\n      for (const validator of this.validators) {\n        if (validator.willValidate(target)) {\n          validator.validate(target)\n        }\n      }\n\n      this.reportValidity(target)\n    }\n  }\n\n  toggleSubmitsDisabled = ({ target }) => {\n    if (isFieldElement(target) && this.willDisableSubmitWhenInvalid(target)) {\n      disableSubmitWhenInvalid(target.form)\n    }\n  }\n\n  reportValidationMessages(forms) {\n    const invalidFields = []\n\n    for (const form of forms) {\n      for (const element of Array.from(form.elements).filter(isFieldElement)) {\n        const serverRenderedInvalid = /true/i.test(element.getAttribute(\"aria-invalid\"))\n        const id = element.getAttribute(\"aria-errormessage\")\n        const errorMessageElement = document.getElementById(id)\n        const validationMessage = errorMessageElement?.textContent\n\n        if (validationMessage) {\n          element.setCustomValidity(validationMessage)\n        }\n\n        if (validationMessage || serverRenderedInvalid) {\n          this.reportValidity(element)\n          invalidFields.push(element)\n        }\n\n        if (this.willDisableSubmitWhenInvalid(element)) {\n          disableSubmitWhenInvalid(form)\n        }\n      }\n    }\n\n    const [firstInvalidField] = invalidFields\n    firstInvalidField?.focus()\n  }\n\n  willDisableSubmitWhenInvalid(target) {\n    return typeof this.options.disableSubmitWhenInvalid === \"function\" ?\n      this.options.disableSubmitWhenInvalid(target) :\n      !!this.options.disableSubmitWhenInvalid\n  }\n\n  clearValidity(input) {\n    input.setCustomValidity(\"\")\n\n    this.reportValidity(input)\n  }\n\n  reportValidity(input) {\n    const id = input.getAttribute(\"aria-errormessage\")\n    const validationMessage = getValidationMessage(input)\n    const element = document.getElementById(id) || createValidationMessageFragment(input.form)\n\n    if (input.form?.noValidate) {\n      return false\n    } else if (id && element) {\n      element.id = id\n      element.innerHTML = validationMessage\n\n      if (validationMessage) {\n        input.setCustomValidity(validationMessage)\n        input.setAttribute(\"aria-describedby\", id)\n        input.setAttribute(\"aria-invalid\", \"true\")\n      } else {\n        input.removeAttribute(\"aria-describedby\")\n        input.removeAttribute(\"aria-invalid\")\n      }\n\n      if (!element.parentElement) {\n        input.insertAdjacentElement(\"afterend\", element)\n      }\n\n      if (input.form && this.willDisableSubmitWhenInvalid(input)) disableSubmitWhenInvalid(input.form)\n\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\nfunction focusFirstInvalidField(element) {\n  if (element instanceof HTMLFormElement) {\n    return Array.from(element.elements).some(field => focusFirstInvalidField(field))\n  } else if (isFieldElement(element) && !element.validity.valid) {\n    element.focus()\n    element.scrollIntoView()\n    return true\n  } else {\n    return false\n  }\n}\n\nfunction disableSubmitWhenInvalid(form) {\n  if (!form || form.noValidate) return\n\n  const isValid = Array.from(form.elements).filter(isFieldElement).every(input => input.validity.valid)\n\n  for (const element of form.elements) {\n    if (element.type == \"submit\" && !element.formNoValidate) {\n      element.disabled = !isValid\n    }\n  }\n}\n\nfunction createValidationMessageFragment(form) {\n  if (form) {\n    const template = form.querySelector(\"[data-validation-message-template]\")\n\n    return template?.content.children[0].cloneNode()\n  }\n}\n\nfunction getValidationMessage(input) {\n  const validationMessages = Object.entries(readValidationMessages(input))\n\n  const [ _, validationMessage ] = validationMessages.find(([ key ]) => input.validity[key]) || [ null, null ]\n\n  return validationMessage || input.validationMessage\n}\n"],"names":[],"mappings":"AAAO,SAAS,cAAc,CAAC,OAAO,EAAE;AACxC,EAAE,OAAO,CAAC,OAAO,CAAC,QAAQ,IAAI,UAAU,IAAI,OAAO,IAAI,OAAO,CAAC,YAAY;AAC3E,CAAC;AACD;AACO,SAAS,sBAAsB,CAAC,KAAK,EAAE;AAC9C,EAAE,IAAI;AACN,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAC,IAAI,EAAE;AAC3E,GAAG,CAAC,MAAM,CAAC,EAAE;AACb,IAAI,OAAO,EAAE;AACb,GAAG;AACH;;ACRe,uBAAK,CAAC;AACrB,EAAE,QAAQ,GAAG,+BAA+B;AAC5C,EAAE,iBAAiB,GAAG,KAAK;AAC3B;AACA,EAAE,WAAW,CAAC,qBAAqB,EAAE,SAAS,EAAE;AAChD,IAAI,IAAI,CAAC,qBAAqB,GAAG,sBAAqB;AACtD,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,cAAc,EAAC;AACrE,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,SAAS,KAAK,UAAU;AAClD,MAAM,SAAS;AACf,MAAM,CAAC,KAAK,KAAK,CAAC,CAAC,UAAS;AAC5B,GAAG;AACH;AACA,EAAE,OAAO,GAAG;AACZ,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE;AAChD,MAAM,eAAe,EAAE,CAAC,UAAU,CAAC;AACnC,MAAM,SAAS,EAAE,IAAI;AACrB,MAAM,OAAO,EAAE,IAAI;AACnB,KAAK,EAAC;AACN,IAAI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAC;AAC/E,GAAG;AACH;AACA,EAAE,UAAU,GAAG;AACf,IAAI,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAE;AACtC,GAAG;AACH;AACA,EAAE,YAAY,CAAC,MAAM,EAAE;AACvB,IAAI,OAAO,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AACxD,GAAG;AACH;AACA,EAAE,QAAQ,CAAC,MAAM,EAAE;AACnB,IAAI,MAAM,iBAAiB,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,cAAc,EAAC;AAC1E,IAAI,MAAM,WAAW,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,MAAM,EAAC;AAChH,IAAI,MAAM,WAAW,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,OAAO,EAAC;AAC9E;AACA,IAAI,IAAI,WAAW,IAAI,WAAW,EAAE;AACpC,MAAM,KAAK,MAAM,QAAQ,IAAI,iBAAiB,EAAE;AAChD,QAAQ,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,QAAQ,EAAC;AAC1D,OAAO;AACP,KAAK,MAAM,IAAI,WAAW,EAAE;AAC5B,MAAM,KAAK,MAAM,QAAQ,IAAI,iBAAiB,EAAE;AAChD,QAAQ,MAAM,kBAAkB,GAAG,sBAAsB,CAAC,QAAQ,EAAC;AACnE;AACA,QAAQ,QAAQ,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,YAAY,EAAC;AACnE,QAAQ,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,QAAQ,EAAC;AAC3D,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,EAAE,cAAc,GAAG,CAAC,eAAe,KAAK;AACxC,IAAI,IAAI,IAAI,CAAC,iBAAiB,EAAE,MAAM;AACtC;AACA,IAAI,KAAK,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,eAAe,EAAE;AAChE,MAAM,IAAI,IAAI,KAAK,YAAY,EAAE;AACjC,QAAQ,IAAI,MAAM,CAAC,QAAQ,EAAE;AAC7B,UAAU,IAAI,CAAC,4BAA4B,CAAC,MAAM,EAAC;AACnD,SAAS,MAAM;AACf,UAAU,MAAM,CAAC,eAAe,CAAC,eAAe,EAAC;AACjD,SAAS;AACT,OAAO,MAAM,IAAI,UAAU,CAAC,MAAM,EAAE;AACpC,QAAQ,IAAI,CAAC,wBAAwB,CAAC,UAAU,EAAC;AACjD,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,EAAE,wBAAwB,CAAC,KAAK,EAAE;AAClC,IAAI,MAAM,kBAAkB,GAAG,qBAAqB,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAC;AAC1E;AACA,IAAI,KAAK,MAAM,QAAQ,IAAI,kBAAkB,EAAE;AAC/C,MAAM,IAAI,QAAQ,CAAC,QAAQ,EAAE;AAC7B,QAAQ,MAAM,KAAK,GAAG,aAAa,CAAC,QAAQ,EAAC;AAC7C;AACA,QAAQ,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;AAC3C,UAAU,KAAK,MAAM,eAAe,IAAI,KAAK,EAAE;AAC/C,YAAY,IAAI,CAAC,4BAA4B,CAAC,eAAe,EAAC;AAC9D,YAAY,IAAI,eAAe,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,MAAM,EAAE;AACzE,cAAc,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAC;AAC5C,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,EAAE,4BAA4B,CAAC,OAAO,EAAE;AACxC,IAAI,IAAI,CAAC,iBAAiB,GAAG,KAAI;AACjC,IAAI,OAAO,CAAC,QAAQ,GAAG,MAAK;AAC5B,IAAI,OAAO,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,EAAC;AACjD,IAAI,UAAU,CAAC,MAAM,IAAI,CAAC,iBAAiB,GAAG,KAAK,EAAE,CAAC,EAAC;AACvD,GAAG;AACH;AACA,EAAE,iBAAiB,CAAC,KAAK,EAAE;AAC3B,IAAI,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;AAClD,GAAG;AACH;AACA,EAAE,IAAI,OAAO,GAAG;AAChB,IAAI,OAAO,IAAI,CAAC,qBAAqB,CAAC,OAAO;AAC7C,GAAG;AACH,CAAC;AACD;AACA,SAAS,aAAa,CAAC,WAAW,EAAE;AACpC,EAAE,MAAM,OAAO,GAAG,IAAI,IAAG;AACzB,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,YAAW;AACpC;AACA,EAAE,IAAI,IAAI,IAAI,IAAI,YAAY,eAAe,EAAE;AAC/C,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAC;AAC/C,IAAI,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,KAAK;AAC7C,MAAM,KAAK;AACX,MAAM,CAAC,KAAK,EAAC;AACb;AACA,IAAI,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;AACpC,MAAM,IAAI,OAAO,CAAC,IAAI,KAAK,UAAU,EAAE;AACvC,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO,EAAC;AAC5B,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,OAAO,CAAC,IAAI,KAAK,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;AACxD,MAAM,OAAO,CAAC,KAAK,GAAE;AACrB,KAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;AAC5B,CAAC;AACD;AACA,SAAS,qBAAqB,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,GAAG,IAAI,GAAG,EAAE;AACpE,EAAE,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAC5B,IAAI,IAAI,IAAI,YAAY,OAAO,EAAE;AACjC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,QAAQ,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAC;AAC1B,OAAO;AACP;AACA,MAAM,QAAQ,CAAC,GAAG,CAAC,GAAG,qBAAqB,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAC;AAC/E,KAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;AAC7B;;ACxIA,MAAM,cAAc,GAAG;AACvB,EAAE,wBAAwB,EAAE,KAAK;AACjC,EAAE,UAAU,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC;AAC/B,EAAE,UAAU,EAAE;AACd,IAAI,QAAQ,EAAE,KAAK;AACnB,GAAG;AACH,EAAC;AACD;AACe,MAAM,qBAAqB,CAAC;AAC3C,EAAE,OAAO,OAAO,CAAC,OAAO,GAAG,QAAQ,EAAE,OAAO,GAAG,EAAE,EAAE;AACnD,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,OAAO,GAAE;AACxC,GAAG;AACH;AACA,EAAE,WAAW,CAAC,OAAO,GAAG,QAAQ,EAAE,OAAO,GAAG,EAAE,EAAE;AAChD,IAAI,IAAI,CAAC,OAAO,GAAG,QAAO;AAC1B,IAAI,IAAI,CAAC,OAAO,GAAG,EAAE,GAAG,cAAc,EAAE,GAAG,OAAO,GAAE;AACpD,IAAI,IAAI,CAAC,UAAU,GAAG;AACtB,MAAM,IAAI,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC;AACnE,MAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,GAAG;AACZ,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,IAAI,SAAS,CAAC,OAAO,EAAE,EAAC;AAC7D,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,EAAC;AACzG;AACA,IAAI,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;AACrD,MAAM,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,2BAA2B,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,EAAC;AAClH,KAAK;AACL;AACA,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,EAAC;AACtE;AACA,IAAI,IAAI,CAAC,wBAAwB;AACjC,MAAM,IAAI,CAAC,OAAO,YAAY,eAAe;AAC7C,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;AACtB,QAAQ,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC;AAC7C,MAAK;AACL,GAAG;AACH;AACA,EAAE,UAAU,GAAG;AACf,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,EAAC;AAC5G;AACA,IAAI,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;AACrD,MAAM,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,2BAA2B,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,EAAC;AACrH,KAAK;AACL;AACA,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,EAAC;AACzE,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,IAAI,SAAS,CAAC,UAAU,EAAE,EAAC;AAChE,GAAG;AACH;AACA,EAAE,mBAAmB,GAAG,CAAC,KAAK,KAAK;AACnC,IAAI,IAAI,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;AAC3E,MAAM,KAAK,CAAC,cAAc,GAAE;AAC5B;AACA,MAAM,sBAAsB,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC,MAAM,EAAC;AAC/D,KAAK;AACL,GAAG;AACH;AACA,EAAE,2BAA2B,GAAG,CAAC,EAAE,MAAM,EAAE,KAAK;AAChD,IAAI,IAAI,cAAc,CAAC,MAAM,CAAC,EAAE;AAChC,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,EAAC;AAChC;AACA,MAAM,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE;AAC/C,QAAQ,IAAI,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE;AAC5C,UAAU,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAC;AACpC,SAAS;AACT,OAAO;AACP;AACA,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,EAAC;AACjC,KAAK;AACL,GAAG;AACH;AACA,EAAE,qBAAqB,GAAG,CAAC,EAAE,MAAM,EAAE,KAAK;AAC1C,IAAI,IAAI,cAAc,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE;AAC7E,MAAM,wBAAwB,CAAC,MAAM,CAAC,IAAI,EAAC;AAC3C,KAAK;AACL,GAAG;AACH;AACA,EAAE,wBAAwB,CAAC,KAAK,EAAE;AAClC,IAAI,MAAM,aAAa,GAAG,GAAE;AAC5B;AACA,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAC9B,MAAM,KAAK,MAAM,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;AAC9E,QAAQ,MAAM,qBAAqB,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,cAAc,CAAC,EAAC;AACxF,QAAQ,MAAM,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC,mBAAmB,EAAC;AAC5D,QAAQ,MAAM,mBAAmB,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,EAAC;AAC/D,QAAQ,MAAM,iBAAiB,GAAG,mBAAmB,EAAE,YAAW;AAClE;AACA,QAAQ,IAAI,iBAAiB,EAAE;AAC/B,UAAU,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,EAAC;AACtD,SAAS;AACT;AACA,QAAQ,IAAI,iBAAiB,IAAI,qBAAqB,EAAE;AACxD,UAAU,IAAI,CAAC,cAAc,CAAC,OAAO,EAAC;AACtC,UAAU,aAAa,CAAC,IAAI,CAAC,OAAO,EAAC;AACrC,SAAS;AACT;AACA,QAAQ,IAAI,IAAI,CAAC,4BAA4B,CAAC,OAAO,CAAC,EAAE;AACxD,UAAU,wBAAwB,CAAC,IAAI,EAAC;AACxC,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,MAAM,CAAC,iBAAiB,CAAC,GAAG,cAAa;AAC7C,IAAI,iBAAiB,EAAE,KAAK,GAAE;AAC9B,GAAG;AACH;AACA,EAAE,4BAA4B,CAAC,MAAM,EAAE;AACvC,IAAI,OAAO,OAAO,IAAI,CAAC,OAAO,CAAC,wBAAwB,KAAK,UAAU;AACtE,MAAM,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,MAAM,CAAC;AACnD,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB;AAC7C,GAAG;AACH;AACA,EAAE,aAAa,CAAC,KAAK,EAAE;AACvB,IAAI,KAAK,CAAC,iBAAiB,CAAC,EAAE,EAAC;AAC/B;AACA,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,EAAC;AAC9B,GAAG;AACH;AACA,EAAE,cAAc,CAAC,KAAK,EAAE;AACxB,IAAI,MAAM,EAAE,GAAG,KAAK,CAAC,YAAY,CAAC,mBAAmB,EAAC;AACtD,IAAI,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,KAAK,EAAC;AACzD,IAAI,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,+BAA+B,CAAC,KAAK,CAAC,IAAI,EAAC;AAC9F;AACA,IAAI,IAAI,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE;AAChC,MAAM,OAAO,KAAK;AAClB,KAAK,MAAM,IAAI,EAAE,IAAI,OAAO,EAAE;AAC9B,MAAM,OAAO,CAAC,EAAE,GAAG,GAAE;AACrB,MAAM,OAAO,CAAC,SAAS,GAAG,kBAAiB;AAC3C;AACA,MAAM,IAAI,iBAAiB,EAAE;AAC7B,QAAQ,KAAK,CAAC,iBAAiB,CAAC,iBAAiB,EAAC;AAClD,QAAQ,KAAK,CAAC,YAAY,CAAC,kBAAkB,EAAE,EAAE,EAAC;AAClD,QAAQ,KAAK,CAAC,YAAY,CAAC,cAAc,EAAE,MAAM,EAAC;AAClD,OAAO,MAAM;AACb,QAAQ,KAAK,CAAC,eAAe,CAAC,kBAAkB,EAAC;AACjD,QAAQ,KAAK,CAAC,eAAe,CAAC,cAAc,EAAC;AAC7C,OAAO;AACP;AACA,MAAM,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;AAClC,QAAQ,KAAK,CAAC,qBAAqB,CAAC,UAAU,EAAE,OAAO,EAAC;AACxD,OAAO;AACP;AACA,MAAM,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,EAAE,wBAAwB,CAAC,KAAK,CAAC,IAAI,EAAC;AACtG;AACA,MAAM,OAAO,IAAI;AACjB,KAAK,MAAM;AACX,MAAM,OAAO,KAAK;AAClB,KAAK;AACL,GAAG;AACH,CAAC;AACD;AACA,SAAS,sBAAsB,CAAC,OAAO,EAAE;AACzC,EAAE,IAAI,OAAO,YAAY,eAAe,EAAE;AAC1C,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,sBAAsB,CAAC,KAAK,CAAC,CAAC;AACpF,GAAG,MAAM,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE;AACjE,IAAI,OAAO,CAAC,KAAK,GAAE;AACnB,IAAI,OAAO,CAAC,cAAc,GAAE;AAC5B,IAAI,OAAO,IAAI;AACf,GAAG,MAAM;AACT,IAAI,OAAO,KAAK;AAChB,GAAG;AACH,CAAC;AACD;AACA,SAAS,wBAAwB,CAAC,IAAI,EAAE;AACxC,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE,MAAM;AACtC;AACA,EAAE,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAC;AACvG;AACA,EAAE,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,QAAQ,EAAE;AACvC,IAAI,IAAI,OAAO,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE;AAC7D,MAAM,OAAO,CAAC,QAAQ,GAAG,CAAC,QAAO;AACjC,KAAK;AACL,GAAG;AACH,CAAC;AACD;AACA,SAAS,+BAA+B,CAAC,IAAI,EAAE;AAC/C,EAAE,IAAI,IAAI,EAAE;AACZ,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,oCAAoC,EAAC;AAC7E;AACA,IAAI,OAAO,QAAQ,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;AACpD,GAAG;AACH,CAAC;AACD;AACA,SAAS,oBAAoB,CAAC,KAAK,EAAE;AACrC,EAAE,MAAM,kBAAkB,GAAG,MAAM,CAAC,OAAO,CAAC,sBAAsB,CAAC,KAAK,CAAC,EAAC;AAC1E;AACA,EAAE,MAAM,EAAE,CAAC,EAAE,iBAAiB,EAAE,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,GAAE;AAC9G;AACA,EAAE,OAAO,iBAAiB,IAAI,KAAK,CAAC,iBAAiB;AACrD;;;;"}